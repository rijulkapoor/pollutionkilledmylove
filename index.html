<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pollution killed my love ‚Äî NCR Pollution Life-loss</title>
  <style>
    :root{
      --bg:#f7f5ef;
      --accent:#dfeaf8;
      --primary:#7aaed6;
      --muted:#6b7280;
      --card-shadow:0 12px 40px rgba(0,0,0,0.08);
    }
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Arial;color:#111827;background:var(--accent)}
    .page{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;padding:20px}
    .container{width:100%;max-width:980px}
    .card{background:var(--bg);border-radius:12px;padding:28px;box-shadow:var(--card-shadow)}

    header{text-align:center;margin-bottom:8px}
    header h1{margin:0;font-size:36px}
    header h2{margin:6px 0 0 0;font-size:16px;color:var(--primary);font-weight:700}

    .wizard-wrap{display:flex;flex-direction:column;gap:18px}
    .step{display:none}
    .step.active{display:block}

    label{display:block;margin-top:14px;font-weight:700;font-size:18px}
    select,input[type=number]{width:100%;padding:12px;border-radius:10px;border:3px solid #7f1d1d;margin-top:10px;font-size:16px;box-sizing:border-box}

    .nav-bar{display:flex;gap:12px;justify-content:center;margin-top:20px}
    .btn{min-width:140px;padding:12px;border-radius:10px;border:none;font-weight:700;cursor:pointer}
    .btn.back{background:#fff;border:2px solid #e5e7eb}
    .btn.next,.btn.calculate{background:var(--primary);color:#fff}

    .explanation{position:fixed;left:0;right:0;bottom:0;background:#fff;border-top:1px solid #eee;padding:12px 16px;font-size:13px}

    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;align-items:center;justify-content:center}
    .modal{background:#fff;border-radius:12px;padding:16px;width:min(520px,92%)}

    @media(max-width:520px){
      header h1{font-size:22px}
      label{font-size:15px}
      body.hide-explanation-mobile .explanation{display:none}
    }
  </style>
</head>
<body>
<div class="page">
  <div class="container">
    <div class="card">
      <header>
        <h1>üïäÔ∏è Pollution killed my love</h1>
        <h2>Clinical Memorial ‚Äî NCR Pollution Life-loss</h2>
      </header>

      <p style="text-align:center"><strong>This website estimates how long a deceased loved one may have lived without air pollution in Delhi NCR. This is not a survey, but a tool.</strong><br/>Tell us about them, so we may calculate an estimate.</p>

      <div class="wizard-wrap">
        <div class="progress" style="height:10px;background:#eee;border-radius:6px"><div id="progressBar" style="height:100%;width:0;background:var(--primary)"></div></div>

        <form id="wizard">
          <section class="step active" data-step="1">
            <label>Where did they live?</label>
            <select id="region">
              <option value="delhi">Delhi (Central)</option>
              <option value="north_delhi">North Delhi</option>
              <option value="east_delhi">East Delhi</option>
              <option value="west_delhi">West Delhi</option>
              <option value="south_delhi">South Delhi</option>
              <option value="ghaziabad">Ghaziabad</option>
              <option value="noida">Noida</option>
              <option value="greater_noida">Greater Noida</option>
              <option value="faridabad">Faridabad</option>
              <option value="gurugram">Gurugram</option>
              <option value="sonipat">Sonipat</option>
              <option value="bahadurgarh">Bahadurgarh</option>
              <option value="meerut">Meerut</option>
            </select>
          </section>
          <section class="step" data-step="2">
            <label>How long did they live in NCR?</label>
            <select id="yearsInArea">
              <option value="5">Less than 5 years</option>
              <option value="10">5‚Äì10 years</option>
              <option value="15">10‚Äì15 years</option>
              <option value="20">15‚Äì20 years</option>
              <option value="25">More than 20 years</option>
            </select>
          </section>
          <section class="step" data-step="3">
            <label>How old were they at the time of death?</label>
            <input id="age" type="number" min="5" max="95" value="50" />
            <div id="ageHelp" style="display:none;color:#b91c1c;font-weight:700">Please enter an age between 5 and 95 years.</div>
          </section>
          <section class="step" data-step="4">
            <label>What was their smoking status <span style="font-weight:500">(<strong>at the time of death</strong>)</span>?</label>
            <select id="smoking">
              <option value="never">Never smoked</option>
              <option value="former">Former smoker (left more than 10 years ago)</option>
              <option value="current">Smoker</option>
            </select>
          </section>
          <section class="step" data-step="5">
            <label>Did they have any breathing-related illness?</label>
            <select id="respiratory">
              <option value="no">No breathing-related illness</option>
              <option value="yes">Yes (e.g. asthma, COPD)</option>
            </select>
            <label style="margin-top:18px">Did they have any heart or metabolic condition?</label>
            <select id="cardio">
              <option value="no">No heart or metabolic condition</option>
              <option value="yes">Yes (e.g. heart disease, diabetes)</option>
            </select>
            <label style="margin-top:18px">Proximity to major road or industrial area <span style="font-weight:700">(optional)</span></label>
            <select id="proximity">
              <option value="unknown">Prefer not to say</option>
              <option value="far">No, lived away</option>
              <option value="near">Yes, lived close</option>
            </select>
            <label style="margin-top:18px">Use of mitigation such as HEPA filters or masks <span style="font-weight:700">(optional)</span></label>
            <select id="mitigation">
              <option value="unknown">Prefer not to say</option>
              <option value="no">No regular mitigation</option>
              <option value="yes">Yes, regularly used</option>
            </select>
          </section>
        </form>

        <div class="nav-bar">
          <button id="btnBack" class="btn back">Back</button>
          <button id="btnNext" class="btn next">Next</button>
          <button id="btnCalc" class="btn calculate" style="display:none">Calculate</button>
        </div>
      </div>
    </div>
  </div>

  <div class="explanation"><strong>How this estimate works</strong><br/>The estimate reflects long-term air pollution exposure in Delhi NCR, adjusted for where they lived, how long they lived there, age, and certain health factors.</div>

  <div id="contextModalBackdrop" class="modal-backdrop" style="display:flex">
    <div class="modal" style="text-align:center">
      <p><strong>Air pollution in Delhi NCR shortens lives every year.</strong></p>
      <p>This page reflects on time that may have been taken from those we lost.</p>
      <button id="contextContinue" class="btn next">Continue</button>
    </div>
  </div>
</div>

<script>
  const steps = Array.from(document.querySelectorAll('.step'));
  const progress = document.getElementById('progressBar');
  let current = 0;

  function showStep(i){
    steps.forEach((s,idx)=>s.classList.toggle('active',idx===i));
    progress.style.width = ((i+1)/steps.length*100)+'%';
    current = i;
    updateButtons();
  }

  const btnBack=document.getElementById('btnBack');
  const btnNext=document.getElementById('btnNext');
  const btnCalc=document.getElementById('btnCalc');

  // Calculate button handler (currently missing)
  const regionBaseYears = {
    delhi: 5.5,
    north_delhi: 5.8,
    east_delhi: 5.7,
    west_delhi: 5.6,
    south_delhi: 4.8,
    ghaziabad: 6.0,
    noida: 5.2,
    greater_noida: 4.9,
    faridabad: 5.0,
    gurugram: 4.6,
    sonipat: 4.3,
    bahadurgarh: 4.1,
    meerut: 4.4
  };

  btnCalc.onclick = () => {
    const age = Number(document.getElementById('age').value);

    // Simple restored calculation (full logic can be expanded later)
    // Base estimate decreases with age but never goes to zero
    // Base estimate from NCR region
    const region = document.getElementById('region').value;
    let estimatedYears = regionBaseYears[region] || 4.5;

    // Exposure duration scaling (years lived in NCR)
    const yearsInArea = Number(document.getElementById('yearsInArea').value);
    let exposureFactor = 1.0;
    if(yearsInArea <= 5) exposureFactor = 0.4;
    else if(yearsInArea <= 10) exposureFactor = 0.6;
    else if(yearsInArea <= 15) exposureFactor = 0.8;
    else if(yearsInArea <= 20) exposureFactor = 0.95;
    else exposureFactor = 1.1;

    estimatedYears *= exposureFactor;

    // Health modifiers (adjustments, not dominant)
    const smoking = document.getElementById('smoking').value;
    const respiratory = document.getElementById('respiratory').value;
    const cardio = document.getElementById('cardio').value;

    if(smoking === 'current') estimatedYears *= 1.2;
    else if(smoking === 'former') estimatedYears *= 1.05;

    if(respiratory === 'yes') estimatedYears *= 1.25;
    if(cardio === 'yes') estimatedYears *= 1.15;

    // Optional environmental modifiers
    const proximity = document.getElementById('proximity').value;
    const mitigation = document.getElementById('mitigation').value;

    if(proximity === 'near') estimatedYears *= 1.1;
    if(mitigation === 'yes') estimatedYears *= 0.9;

    // Age sensitivity: older ages lose relatively more but with tapering
    if(age < 40) estimatedYears *= 1.1;
    else if(age < 55) estimatedYears *= 1.0;
    else if(age < 65) estimatedYears *= 0.9;
    else if(age < 75) estimatedYears *= 0.75;
    else if(age < 85) estimatedYears *= 0.55;
    else estimatedYears *= 0.4;

    // Round estimates to whole years for clarity
    // Cap to avoid unrealistic gains
    estimatedYears = Math.min(estimatedYears, 12);

    const centralRounded = Math.round(estimatedYears);
    const lower = Math.max(1, Math.round(centralRounded - 1));
    const upper = Math.max(lower, Math.round(centralRounded + 1));

    const modal = document.createElement('div');
    modal.className = 'modal-backdrop';
    modal.style.display = 'flex';
    modal.innerHTML = `
      <div class="modal" role="document">
        <div style="text-align:center;font-weight:700;color:#6b7280;margin-bottom:6px">In memory of them</div>
        <div style="font-size:22px;font-weight:800;margin:12px 0">üíî‚ù§Ô∏è‚Äçü©π You could have had approximately ${lower}‚Äì${upper} more years with your loved one if it were not for pollution.</div>
        <details style="margin-top:12px">
          <summary style="cursor:pointer;font-weight:700">How this estimate was calculated</summary>
          <p style="font-size:14px;margin-top:8px">This illustrative estimate combines four factors: <br/>‚Ä¢ <strong>Location</strong> within Delhi NCR (relative pollution levels)<br/>‚Ä¢ <strong>Duration</strong> of residence in the region<br/>‚Ä¢ <strong>Age</strong> at the time of death (to reflect vulnerability and remaining lifespan)<br/>‚Ä¢ <strong>Health factors</strong> such as smoking and cardiorespiratory conditions<br/><br/>All values are conservative, population-level approximations meant for awareness and reflection, not medical prediction.</p>
        </details>
        <div style="margin-top:16px;text-align:right">
          <button class="btn back" id="closeResult">Close</button>
        </div>
      </div>`;

    document.body.appendChild(modal);
    modal.querySelector('#closeResult').onclick = () => modal.remove();
  };

  btnBack.onclick=()=>{ if(current>0) showStep(current-1); };
  btnNext.onclick=()=>{
    if(steps[current].dataset.step==='3'){
      const a=+age.value;
      if(a<5||a>95){ ageHelp.style.display='block'; return; }
      ageHelp.style.display='none';
    }
    if(current<steps.length-1) showStep(current+1);
  };

  function updateButtons(){
    btnBack.style.visibility = current===0?'hidden':'visible';
    if(current===steps.length-1){
      btnNext.style.display='none';
      btnCalc.style.display='inline-block';
      document.body.classList.add('hide-explanation-mobile');
    } else {
      btnNext.style.display='inline-block';
      btnCalc.style.display='none';
      document.body.classList.remove('hide-explanation-mobile');
    }
  }

  showStep(0);
  document.getElementById('contextContinue').onclick=()=>document.getElementById('contextModalBackdrop').style.display='none';
</script>
</body>
</html>
